var VideoCompare=function(){"use strict";var e=[],t=[];!function(i,n){if(i&&"undefined"!=typeof document){var s,o=!0===n.prepend?"prepend":"append",a=!0===n.singleTag,d="string"==typeof n.container?document.querySelector(n.container):document.getElementsByTagName("head")[0];if(a){var r=e.indexOf(d);-1===r&&(r=e.push(d)-1,t[r]={}),s=t[r]&&t[r][o]?t[r][o]:t[r][o]=l()}else s=l();65279===i.charCodeAt(0)&&(i=i.substring(1)),s.styleSheet?s.styleSheet.cssText+=i:s.appendChild(document.createTextNode(i))}function l(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),n.attributes)for(var t=Object.keys(n.attributes),i=0;i<t.length;i++)e.setAttribute(t[i],n.attributes[t[i]]);var s="prepend"===o?"afterbegin":"beforeend";return d.insertAdjacentElement(s,e),e}}(".vc-slider-container {\n    display: inline-block;\n    line-height: 0;\n    position: relative;\n    width: 100%;\n}\n\n.vc-slider-container > .video-wrapper {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    max-width: none;\n}\n\n.vc-slider-container > .vc-slider-clipper {\n    width: 50%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: 3;\n    box-shadow: 0 0 0 2px white;\n}\n\n.vc-slider-container > .vc-slider-clipper > .video-wrapper {\n    width: 200%;\n    position: absolute;\n    height: 100%;\n    max-width: none;\n    left: 0;\n}\n\n.vc-wiper-container {\n    display: inline-block;\n    line-height: 0;\n    position: relative;\n    width: 100%;\n}\n\n.vc-wiper-container > .video-wrapper {\n    width: 99%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 99%;\n}\n\n.vc-wiper-container > .vc-wiper-clipper-outer  {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: 3;\n}\n\n.vc-wiper-container > .vc-wiper-clipper-outer > .vc-wiper-clipper {\n    width: 99%; /* leave some space for border */\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 99%;\n    overflow: hidden;\n    z-index: 3;\n}\n\n.vc-wiper-container > .vc-wiper-clipper-outer > .vc-wiper-clipper > .video-wrapper > video  {\n    width: 100%;\n    position: absolute;\n    height: 100%;\n    max-width: none;\n    left: 0;\n}\n\n.vc-three-video-comparison-container {\n    display: inline-block;\n    line-height: 0;\n    position: relative;\n    width: 100%;\n}\n\n.vc-three-video-comparison-container > .video-wrapper {\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    max-width: none;\n}\n\n.vc-three-video-comparison-container > .vc-slider-clipper {\n    width: 50%;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    overflow: hidden;\n    z-index: 3;\n    box-shadow: 0 0 0 2px white;\n}\n\n.vc-three-video-comparison-container > .vc-slider-clipper > .video-wrapper {\n    width: 200%;\n    position: absolute;\n    height: 100%;\n    max-width: none;\n    left: 0;\n}\n\n.vc-side-by-side-container {\n    display: flex;\n    position: relative;\n    justify-content: center;\n    gap: 0px;\n}\n\n.vc-side-by-side-container > .video-wrapper {\n    width: 50%;\n    max-width: 50%;\n    height: auto;\n    position: relative;\n}\n\n.vc-side-by-side-container > .video-wrapper > video {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n.vc-four-grid-container > .video-wrapper {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.vc-four-grid-container > .video-wrapper > video {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n.vc-four-grid-container {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr 1fr;\n    gap: 0;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n}",{});class i{constructor(e){this.container=e,this.videos=[],this.wrappers=[],this.readyStates=[],this.captions=[],this.loadingElement=document.createElement("div"),this.loadingElement.textContent="Loading",this.loadingElement.style.position="absolute",this.loadingElement.style.top="50%",this.loadingElement.style.left="50%",this.loadingElement.style.transform="translate(-50%, -50%)",this.loadingElement.style.backgroundColor="rgba(0, 0, 0, 0.7)",this.loadingElement.style.color="white",this.loadingElement.style.padding="10px 20px",this.loadingElement.style.borderRadius="4px",this.loadingElement.style.zIndex="4",this.container.appendChild(this.loadingElement),this.loadingDots=0,this.loadingInterval=setInterval((()=>this.animateLoading()),500)}animateLoading(){this.loadingElement&&(this.loadingDots=(this.loadingDots+1)%4,this.loadingElement.textContent="Loading"+".".repeat(this.loadingDots))}addVideo(e){const t=this.videos.length;this.videos.push(e),this.readyStates.push(!1),e.pause(),e.currentTime=0,e.style.visibility="hidden",e.style.opacity="0",e.addEventListener("loadstart",(()=>this.resetReadyStates())),e.addEventListener("canplaythrough",(()=>{this.readyStates[t]=!0,this.checkAndPlay()}))}addCaption(e,t){const i=e.getAttribute("vc-caption");if(i){const n=document.createElement("span");n.textContent=i,n.style.position="absolute",n.style.bottom="10px",n.style.right="10px",n.style.backgroundColor="rgba(0, 0, 0, 0.7)",n.style.color="white",n.style.padding="5px 10px",n.style.borderRadius="4px",n.style.minHeight="fit-content",n.style.lineHeight="1.4",n.style.wordBreak="break-word",n.style.maxWidth="80%",n.style.visibility="hidden",n.style.opacity="0",t.appendChild(n),this.captions.push(n);new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"vc-caption"===t.attributeName){const t=e.getAttribute("vc-caption");n.textContent=t}}))})).observe(e,{attributes:!0,attributeFilter:["vc-caption"]})}}addVideoWithWrapper(e){const t=document.createElement("div");e.parentNode.insertBefore(t,e),t.appendChild(e),this.addVideo(e),this.wrappers.push(t),t.classList.add("video-wrapper"),e.style.width="100%",e.style.height="100%",e.style.objectFit="contain",e.style.maxWidth="none",this.addCaption(e,t)}resetReadyStates(){this.readyStates.fill(!1),this.videos.forEach((e=>e.pause())),this.videos.forEach((e=>e.currentTime=0)),this.loadingElement.style.display="block",this.loadingInterval||(this.loadingInterval=setInterval((()=>this.animateLoading()),500))}checkAndPlay(){this.readyStates.every((e=>e))&&(this.videos.forEach((e=>{e.play(),e.style.visibility="visible",e.style.opacity="1"})),this.captions.forEach((e=>{e.style.visibility="visible",e.style.opacity="1"})),this.loadingElement.style.display="none",clearInterval(this.loadingInterval),this.loadingInterval=null)}syncVideos(e=0){const t=this.videos[e];t.addEventListener("timeupdate",(()=>{this.videos.forEach(((i,n)=>{n!==e&&Math.abs(i.currentTime-t.currentTime)>.05&&(i.currentTime=t.currentTime)}))}))}}class n extends i{constructor(e){super(e);const t=e.getElementsByTagName("video")[1],i=e.getElementsByTagName("video")[0];this.addVideoWithWrapper(t),this.addVideoWithWrapper(i),this.setupWiper(),this.syncVideos(0)}setupWiper(){const e=this.videos[0],t=this.videos[1],i=this.wrappers[0],n=this.wrappers[1],s=document.createElement("div");s.classList.add("vc-wiper-clipper-outer");const o=document.createElement("div");o.classList.add("vc-wiper-clipper"),s.appendChild(o),n.parentNode.insertBefore(s,n),o.appendChild(n),this.video2Clipped=!0,this.animationTriggered=!1,e.addEventListener("loadedmetadata",(()=>{this.container.style.aspectRatio=e.videoWidth/e.videoHeight+" / 1"})),e.addEventListener("timeupdate",(()=>{!this.animationTriggered&&t.currentTime>.5*t.duration&&(console.log("triggering animation"),requestAnimationFrame((()=>{s.style.backgroundColor="white"})),s.getBoundingClientRect(),this.startAnimation(s),this.startAnimation(o),this.animationTriggered=!0)})),e.addEventListener("seeked",(()=>{if(e.currentTime<.5*e.duration){if(this.animationTriggered=!1,o.style.clipPath=null,s.style.clipPath=null,this.video2Clipped){const e=i;i.parentNode.insertBefore(n,i),o.appendChild(e)}else{const e=n;n.parentNode.insertBefore(i,n),o.appendChild(e)}this.video2Clipped=!this.video2Clipped,requestAnimationFrame((()=>{s.style.backgroundColor=null}))}})),e.addEventListener("loadstart",(()=>{if(this.animationTriggered=!1,o.style.clipPath=null,s.style.clipPath=null,t.parentNode===this.videoContainer){const e=n;n.parentNode.insertBefore(i,n),o.appendChild(e),this.video2Clipped=!0,this.animationTriggered=!1}}))}startAnimation(e){const t=Date.now(),i=()=>{const n=Date.now()-t,s=Math.min(1,n/1e3),o=`polygon(\n                0% ${200-200*s+.1}%,\n                ${200-200*s+.1}% 0%,\n                0% 0%\n            )`;e.style.clipPath=o,s<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}}class s extends i{constructor(e){super(e);const t=e.getElementsByTagName("video")[1],i=e.getElementsByTagName("video")[0];this.addVideoWithWrapper(t),this.addVideoWithWrapper(i),this.setupSlider(),this.syncVideos(0)}setupSlider(){const e=this.wrappers[1],t=document.createElement("div");t.classList.add("vc-slider-clipper"),e.parentNode.insertBefore(t,e),t.appendChild(e),this.captions.length>1&&(this.captions[1].style.right=null,this.captions[1].style.left="10px");const i=this.videos[0];i.addEventListener("loadedmetadata",(()=>{this.container.style.aspectRatio=i.videoWidth/i.videoHeight+" / 1"}));const n=i=>{const n=((i.touches?i.touches[0].pageX:i.pageX)-this.container.getBoundingClientRect().left)/this.container.offsetWidth*100;n<=100&&(t.style.width=n+"%",e.style.width=100/n*100+"%")};this.container.addEventListener("mousemove",n,!1),this.container.addEventListener("touchstart",n,!1),this.container.addEventListener("touchmove",n,!1)}}class o extends s{constructor(e){super(e);const t=e.getElementsByTagName("video")[2];this.addVideo(t),this.addCaption(t,this.wrappers[0]),this.captions.length>2&&(this.captions[2].style.bottom=null,this.captions[2].style.top="5px",this.captions[2].style.right="5px",this.captions[2].style.zIndex="5",this.captions[2].style.fontSize="10px",this.captions[2].style.padding="2px 4px",this.captions[2].style.borderRadius="2px",this.captions[2].style.minHeight="fit-content",this.captions[2].style.lineHeight="1.4",this.captions[2].style.wordBreak="break-word",this.captions[2].style.maxWidth="80%"),this.wrappers[0].appendChild(t),t.style.width="20%",t.style.height="20%",t.style.position="absolute",t.style.top="0",t.style.right="0",t.style.zIndex="4",this.syncVideos(0)}}class a extends i{constructor(e){super(e);const t=e.getElementsByTagName("video")[0],i=e.getElementsByTagName("video")[1];this.initialize(t,i)}initialize(e,t){this.addVideoWithWrapper(e),this.addVideoWithWrapper(t),this.syncVideos(0),e.addEventListener("loadedmetadata",(()=>{this.container.style.aspectRatio=2*e.videoWidth/e.videoHeight+" / 1"}))}}class d extends i{constructor(e){super(e);const t=e.getElementsByTagName("video");this.initialize(t)}initialize(e){for(const t of e)this.addVideoWithWrapper(t);this.syncVideos(0),e[0].addEventListener("loadedmetadata",(()=>{this.container.style.aspectRatio=2*e[0].videoWidth/(2*e[0].videoHeight)+" / 1"}))}}function r(){const e=()=>{const e=document.getElementsByClassName("vc-slider-container");for(let t=0;t<e.length;t++){const i=e[t];i&&new s(i)}const t=document.getElementsByClassName("vc-wiper-container");for(let e=0;e<t.length;e++){const i=t[e];i&&new n(i)}const i=document.getElementsByClassName("vc-side-by-side-container");for(let e=0;e<i.length;e++){const t=i[e];t&&new a(t)}const r=document.getElementsByClassName("vc-three-video-comparison-container");for(let e=0;e<r.length;e++){const t=r[e];t&&new o(t)}const l=document.getElementsByClassName("vc-four-grid-container");for(let e=0;e<l.length;e++){const t=l[e];t&&new d(t)}};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}return r(),r}();
